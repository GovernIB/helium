openapi: 3.0.3
servers: 
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/josepg-limit/heliumms-dades-service/1.0.0
  - url: http://pendent.de.definir.es
    description: Servidor de desenvolupament
info:
  description: Microservei d'Expedients i Tasques de HeliumMS
    Aquest microservei conté taules de dades per expedients i tasques pels llistats d'expedients i tasques 
    a fi d'agilitzar la consulta sense haver d'accedir a la informació de tasques dins del motor de flux. 
    Les dades s'han d'anar actualitzant i informmant per part del micro servei
    de tramitació d'helium quan es creïn, esborrin o modifiquin expedients, tasques i usuaris assignats.
    
  version: "1.0.0"
  title: HeliumMS Expedients i Tasques API
  contact:
    name: Limit Tecnologies
    email: limit@limit.es
tags:
  - name: Tramitació
    description: Operacions securitzades disponibles per usuaris tramitadors que tramiten i reassignen tasques i gestionen l'expedient.
  - name: Consulta
    description: Operacions disponibles per tots els usuaris que puguin consultar les dades dels expedients.
paths:
  /api/v1/expedients:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: findExpedientsAmbFiltrePaginatV1
      summary: Cerca d'expedients filtrada i paginada
      description: |
        Consulta amb paràmetres corresponent al llistat d'expedients.
        
        La cerca pot rebre paràmetres per
        - ordenar
        - paginar
        - filtrar (amb el mateixos paràmetres que en el llistat)
      parameters:
        - $ref: '#/components/parameters/EntornParam'
        - $ref: '#/components/parameters/FiltreParam'
        - $ref: '#/components/parameters/TipusExpedientParam'
        - $ref: '#/components/parameters/PageNumberParam'
        - $ref: '#/components/parameters/PageSizeParam'
        - $ref: '#/components/parameters/SortParam'
        # Paràmetres propis del filtre
        - in: query
          name: usuariCodi
          schema:
            type: string
          required: false
          description: Codi de l'usuari per filtrar etasques assignades a usuaris o grup pel qual pertany l'usuari
        - in: query
          name: titol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar expedients que continguin en el títol el text passat.
        - in: query
          name: numero
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar expedients que continguin en el número el text passat.
        - in: query
          name: dataInici1
          schema:
            type: string
          required: false
          description: Data per filtar per data d'inici de l'expedient. Indica la data del rang de filtre inicial per consultar els expedients amb data d'inici igual o superior al valor passat com a paràmetre.
          example: 01/11/2021
        - in: query
          name: dataInici2
          schema:
            type: string
          required: false
          description: Data per filtar per data d'inici de l'expedient. Indica la data del rang de filtre final per consultar els expedients amb data d'inici inferior i igual al valor passat com a paràmetre.
          example: 30/11/2021
        - in: query
          name: dataFi1
          schema:
            type: string
          required: false
          description: Data per filtar per data de finalització l'expedient. Indica la data del rang de filtre inicial per consultar els expedients amb data de finalització igual o superior al valor passat com a paràmetre.
          example: 01/12/2021
        - in: query
          name: dataFi2
          schema:
            type: string
          required: false
          description: Data per filtar per data de finalització de l'expedient. Indica la data del rang de filtre final per consultar els expedients amb data de finalització inferior i igual al valor passat com a paràmetre.
          example: 30/12/2021
        - in: query
          name: nomesIniciats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb estat iniciciat.          
        - in: query
          name: nomesFinalitzats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb estat finalitzat.          
        - in: query
          name: estatId
          schema:
            type: integer
            format: int32
          required: false
          description: Filtra els expedients amb un estat concret determinat per l'identificador donat definit al tipus d'expedient.
          example: 10 
        - in: query
          name: nomesTasquesPersonals
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb tasques assignades a persones i que coincideixin amb el codi d'usuari passat com a paràmetre.
        - in: query
          name: nomesTasquesGrup
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb tasques assignades a un grup de responsables que contingui el codi d'usuari passat com a paràmetre.
        - in: query
          name: nomesAlertes
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb alertes.
        - in: query
          name: nomesErrors
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients marcats amb errors.
        - in: query
          name: mostrarAnulats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar o no expedients anul·lats.
        - in: query
          name: mostrarNomesAnulats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients anul·lats.
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExpedientPagedList'
        '400':
          description: Bad input parameter
    post:
      tags:
        - Tramitació
      operationId: createExpedientV1
      summary: Crea un nou expedient
      description: Afegiex un nou expedient al sistema a partir de la informació passada en el cos de la petició.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Expedient'
        description: Expedient a crear
      responses:
        '201':
          description: Expedient created
          headers:
            Location:
              description: Adreça de l'expedient creat amb el mateix identificador expedientId que el passat com a atribut id de l'expedient.
              schema:
                type: string
                format: uri
                example: http://example.com/v1/expedients/{expedientId}
        '400':
          description: Bad request
        '409':
          description: Conflicte. Ja existeix el expedient
          
  /api/v1/expedients/ids:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: findExpedientsIdsAmbFiltrePaginatV1
      summary: Cerca d'identificadors d'expedients filtrada i paginada
      description: |
        Consulta els identificadors amb paràmetres corresponent al llistat d'expedients.
        
        La cerca pot rebre paràmetres per
        - ordenar
        - paginar
        - filtrar (amb el mateixos paràmetres que en el llistat)
      parameters:
        - $ref: '#/components/parameters/EntornParam'
        - $ref: '#/components/parameters/FiltreParam'
        - $ref: '#/components/parameters/TipusExpedientParam'
        - $ref: '#/components/parameters/PageNumberParam'
        - $ref: '#/components/parameters/PageSizeParam'
        - $ref: '#/components/parameters/SortParam'
        # Paràmetres propis del filtre
        - in: query
          name: usuariCodi
          schema:
            type: string
          required: false
          description: Codi de l'usuari per filtrar etasques assignades a usuaris o grup pel qual pertany l'usuari
        - in: query
          name: titol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar expedients que continguin en el títol el text passat.
        - in: query
          name: numero
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar expedients que continguin en el número el text passat.
        - in: query
          name: dataInici1
          schema:
            type: string
          required: false
          description: Data per filtar per data d'inici de l'expedient. Indica la data del rang de filtre inicial per consultar els expedients amb data d'inici igual o superior al valor passat com a paràmetre.
          example: 01/11/2021
        - in: query
          name: dataInici2
          schema:
            type: string
          required: false
          description: Data per filtar per data d'inici de l'expedient. Indica la data del rang de filtre final per consultar els expedients amb data d'inici inferior i igual al valor passat com a paràmetre.
          example: 30/11/2021
        - in: query
          name: dataFi1
          schema:
            type: string
          required: false
          description: Data per filtar per data de finalització l'expedient. Indica la data del rang de filtre inicial per consultar els expedients amb data de finalització igual o superior al valor passat com a paràmetre.
          example: 01/12/2021
        - in: query
          name: dataFi2
          schema:
            type: string
          required: false
          description: Data per filtar per data de finalització de l'expedient. Indica la data del rang de filtre final per consultar els expedients amb data de finalització inferior i igual al valor passat com a paràmetre.
          example: 30/12/2021
        - in: query
          name: nomesIniciats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb estat iniciciat.          
        - in: query
          name: nomesFinalitzats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb estat finalitzat.          
        - in: query
          name: estatId
          schema:
            type: integer
            format: int32
          required: false
          description: Filtra els expedients amb un estat concret determinat per l'identificador donat definit al tipus d'expedient.
          example: 10 
        - in: query
          name: nomesTasquesPersonals
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb tasques assignades a persones i que coincideixin amb el codi d'usuari passat com a paràmetre.
        - in: query
          name: nomesTasquesGrup
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb tasques assignades a un grup de responsables que contingui el codi d'usuari passat com a paràmetre.
        - in: query
          name: nomesAlertes
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients amb alertes.
        - in: query
          name: nomesErrors
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients marcats amb errors.
        - in: query
          name: mostrarAnulats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar o no expedients anul·lats.
        - in: query
          name: mostrarNomesAnulats
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només expedients anul·lats.
      
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdsPagedList'
        '204':
          description: No content
        '400':
          description: Bad input parameter          
          
  /api/v1/expedients/{expedientId}:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: getExpedientV1
      summary: Consulta un expedient donat el seu identificador
      description: Retorna les dades del expedient amb l'identificador informat al paràmetre `expedientId`
      parameters: 
        - $ref: '#/components/parameters/ExpedientIdPathParam'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expedient'
        '404':
          description: Not found
    put:
      tags:
        - Tramitació
      operationId: updateExpedientV1
      summary: Modifica un expedient donat el seu identificador
      description: Modifica el expedient amb l'identificador passat al paràmetre `expedientId`, amb les totes dades de l'objecte Expedient passat al body de la petició
      parameters:
        - $ref: '#/components/parameters/ExpedientIdPathParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Expedient'
      responses:
        '204':
          description: Expedient actualitzat
        '404':
          description: Not found
        '409':
          description: Conflicte
    patch:
      tags:
        - Tramitació
      operationId: patchExpedientV1
      summary: Actualitza camps concrets d'un expedient donat el seu identificador
      description: |
        Modifica els camps del expedient amb l'identificador passat al paràmetre `expedientId`, amb els camps de l'objecte Expedient passat al body de la petició.  
        Només modifica els camps informats en l'objecte. Els camps no inclosos en l'objecte no seran modificats.
      parameters:
        - $ref: '#/components/parameters/ExpedientIdPathParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchBody'
      responses:
        '204':
          description: Expedient actualitzat
        '404':
          description: Not found
        '409':
          description: Conflicte
    delete:
      tags:
        - Tramitació
      operationId: deleteExpedientV1
      summary: Elimina un expedient donat el seu identificador
      description: Elimina el expedient amb l'identificador passat al paràmetre `expedientId` i la informació associada de les tasques i dels responsables.
      parameters:
        - $ref: '#/components/parameters/ExpedientIdPathParam'
      responses:
        '204':
          description: Ok. No content
        '404':
          description: Not found


  /api/v1/tasques:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: findTasquesAmbFiltrePaginatV1
      summary: Cerca de tasques filtrada i paginada
      description: |
        Consulta amb paràmetres corresponent al llistat de tasques.
        
        La cerca pot rebre paràmetres per
        - ordenar
        - paginar
        - filtrar (amb el mateixos paràmetres que en el llistat)
      parameters:
        - $ref: '#/components/parameters/EntornParam'
        - $ref: '#/components/parameters/FiltreParam'
        - $ref: '#/components/parameters/TipusExpedientParam'
        - $ref: '#/components/parameters/PageNumberParam'
        - $ref: '#/components/parameters/PageSizeParam'
        - $ref: '#/components/parameters/SortParam'
        # Paràmetres propis del filtre
        - in: query
          name: usuariAssignat
          schema:
            type: string
          required: false
          description: Codi de l'usuari per filtrar tasques assignades a usuaris o grup pel qual pertany l'usuari
        - in: query
          name: nom
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques per nom donat i que coincideix amb el codi donat en el flux.
        - in: query
          name: titol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques que continguin en el títol el text passat.
        - $ref: '#/components/parameters/ExpedientParam'
        - in: query
          name: expedientTitol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques pel títol de l'expedient.
        - in: query
          name: expedientNumero
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques pel número de l'expedient.
        - in: query
          name: dataCreacioInici
          schema:
            type: string
          required: false
          description: Data per filtar per data de creació de la tasca. Indica la data del rang de filtre inicial per consultar els tasques amb data de creació igual o superior al valor passat com a paràmetre.
          example: 01/11/2021
        - in: query
          name: dataCreacioFi
          schema:
            type: string
          required: false
          description: Data per filtar per data de creació de la tasca. Indica la data del rang de filtre final per consultar els tasques amb data de creació inferior i igual al valor passat com a paràmetre.
          example: 30/11/2021
        - in: query
          name: dataLimitInici
          schema:
            type: string
          required: false
          description: Data per filtar per data límit de la tasca. Indica la data del rang de filtre inicial per consultar els tasques amb data límit igual o superior al valor passat com a paràmetre.
          example: 01/12/2021
        - in: query
          name: dataLimitFi
          schema:
            type: string
          required: false
          description: Data per filtar per data límit de la tasca. Indica la data del rang de filtre final per consultar els tasques amb data límit inferior i igual al valor passat com a paràmetre.
          example: 30/12/2021
        - in: query
          name: mostrarAssignadesUsuari
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques que estan assignades a un usuari i si es passa el codi de l'usuari només es mostren les tasques de l'usuari.
        - in: query
          name: mostrarAssignadesGrup
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques que estan assignades a un grup d'usuaris i si es passa el codi de l'usuari llavors només es mostren les tasques que tenen l'usuari assignat en el grup.
        - in: query
          name: nomesPendents
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques pendents que no estan finalitzades.

      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TascaPagedList'
        '400':
          description: Bad input parameter
    post:
      tags:
        - Tramitació
      operationId: createTascaV1
      summary: Crea un nou tasca
      description: Afegiex un nou tasca al sistema a partir de la informació passada en el cos de la petició.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tasca'
        description: Tasca a crear
      responses:
        '201':
          description: Tasca created
          headers:
            Location:
              description: Adreça de la tasca creat amb el mateix identificador tascaId que el passat com a atribut id de la tasca.
              schema:
                type: string
                format: uri
                example: http://example.com/v1/tasques/{tascaId}
        '400':
          description: Bad request
        '409':
          description: Conflicte. Ja existeix la tasca

  /api/v1/tasques/ids:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: findTasquesIdsAmbFiltrePaginatV1
      summary: Cerca d'identificadors de tasques filtrada i paginada
      description: |
        Consulta amb paràmetres corresponent a la selecció de tasques del llistat de tasques. Conté
        les mateixes opcions de filtre que la llista paginada
        
        La cerca pot rebre paràmetres per
        - ordenar
        - paginar
        - filtrar (amb el mateixos paràmetres que en el llistat)
      parameters:
        - $ref: '#/components/parameters/EntornParam'
        - $ref: '#/components/parameters/FiltreParam'
        - $ref: '#/components/parameters/TipusExpedientParam'
        - $ref: '#/components/parameters/PageNumberParam'
        - $ref: '#/components/parameters/PageSizeParam'
        - $ref: '#/components/parameters/SortParam'
        # Paràmetres propis del filtre
        - in: query
          name: usuariAssignat
          schema:
            type: string
          required: false
          description: Codi de l'usuari per filtrar tasques assignades a usuaris o grup pel qual pertany l'usuari
        - in: query
          name: nom
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques per nom donat i que coincideix amb el codi donat en el flux.
        - in: query
          name: titol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques que continguin en el títol el text passat.
        - $ref: '#/components/parameters/ExpedientParam'
        - in: query
          name: expedientTitol
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques pel títol de l'expedient.
        - in: query
          name: expedientNumero
          schema:
            type: string
          required: false
          description: Paràmetre per filtrar tasques pel número de l'expedient.
        - in: query
          name: dataCreacioInici
          schema:
            type: string
          required: false
          description: Data per filtar per data de creació de la tasca. Indica la data del rang de filtre inicial per consultar els tasques amb data de creació igual o superior al valor passat com a paràmetre.
          example: 01/11/2021
        - in: query
          name: dataCreacioFi
          schema:
            type: string
          required: false
          description: Data per filtar per data de creació de la tasca. Indica la data del rang de filtre final per consultar els tasques amb data de creació inferior i igual al valor passat com a paràmetre.
          example: 30/11/2021
        - in: query
          name: dataLimitInici
          schema:
            type: string
          required: false
          description: Data per filtar per data límit de la tasca. Indica la data del rang de filtre inicial per consultar els tasques amb data límit igual o superior al valor passat com a paràmetre.
          example: 01/12/2021
        - in: query
          name: dataLimitFi
          schema:
            type: string
          required: false
          description: Data per filtar per data límit de la tasca. Indica la data del rang de filtre final per consultar els tasques amb data límit inferior i igual al valor passat com a paràmetre.
          example: 30/12/2021
        - in: query
          name: mostrarAssignadesUsuari
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques que estan assignades a un usuari i si es passa el codi de l'usuari només es mostren les tasques de l'usuari.
        - in: query
          name: mostrarAssignadesGrup
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques que estan assignades a un grup d'usuaris i si es passa el codi de l'usuari llavors només es mostren les tasques que tenen l'usuari assignat en el grup.
        - in: query
          name: nomesPendents
          schema:
            type: boolean
          required: false
          description: Indica si mostrar només les tasques pendents que no estan finalitzades.

      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IdsPagedList'
        '204':
          description: No content
        '400':
          description: Bad input parameter

  /api/v1/tasques/{tascaId}:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: getTascaV1
      summary: Consulta una tasca donat el seu identificador
      description: Retorna les dades dla tasca amb l'identificador informat al paràmetre `tascaId`
      parameters: 
        - $ref: '#/components/parameters/TascaIdPathParam'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tasca'
        '404':
          description: Not found
    put:
      tags:
        - Tramitació
      operationId: updateTascaV1
      summary: Modifica una tasca donat el seu identificador
      description: Modifica la tasca amb l'identificador passat al paràmetre `tascaId`, amb les totes dades de l'objecte Tasca passat al body de la petició
      parameters:
        - $ref: '#/components/parameters/TascaIdPathParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tasca'
      responses:
        '204':
          description: Tasca actualitzat
        '404':
          description: Not found
        '409':
          description: Conflicte
    patch:
      tags:
        - Tramitació
      operationId: patchTascaV1
      summary: Actualitza camps concrets d'una tasca donat el seu identificador
      description: |
        Modifica els camps dla tasca amb l'identificador passat al paràmetre `tascaId`, amb els camps de l'objecte Tasca passat al body de la petició.  
        Només modifica els camps informats en l'objecte. Els camps no inclosos en l'objecte no seran modificats.
      parameters:
        - $ref: '#/components/parameters/TascaIdPathParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchBody'
      responses:
        '204':
          description: Tasca actualitzat
        '404':
          description: Not found
        '409':
          description: Conflicte
    delete:
      tags:
        - Tramitació
      operationId: deleteTascaV1
      summary: Elimina una tasca donat el seu identificador
      description: Elimina la tasca amb l'identificador passat al paràmetre `tascaId` i la informació associada de les tasques i dels responsables.
      parameters:
        - $ref: '#/components/parameters/TascaIdPathParam'
      responses:
        '204':
          description: Ok. No content
        '404':
          description: Not found

  /api/v1/tasques/{tascaId}/responsables:
    get:
      tags:
        - Tramitació
        - Consulta
      operationId: getResponsablesV1
      summary: Consulta els codis dels usuaris responsables d'una tasca donat l'identificador de la tasca.
      description: Retorna una llista de codis d'usuaris dels usuaris responsables assignats a la tasca. Els responsables
                    s'informen quan una tasca s'assigna a un grup.
      parameters: 
        - $ref: '#/components/parameters/TascaIdPathParam'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                type: array
                items: 
                  type: string
        '404':
          description: Not found
    post:
      tags:
        - Tramitació
      operationId: setResponsablesV1
      summary: Estableix el llistat de responsables d'una tasca donat l'identificador de la tasca i el llistat de codis d'usuaris responsables.
      description: A partir de l'identificador de la tasca s'estableix el llistat d'usuaris responsables. Si el llistat està buit o és nul llavors 
                es buida la llista d'usuaris responsables.
      parameters:
        - $ref: '#/components/parameters/TascaIdPathParam'
        - in: query
          name: responsables
          description: Llistat de codis d'usuaris responsables.
          schema:
            type: array
            items: 
              type: string
      responses:
        '200':
          description: Resultat correcte.
    delete:
      tags:
        - Tramitació
      operationId: deleteResponsablesV1
      summary: Elimina els responsables d'una tasca
      description: Buida el llistat d'usuaris responsables d'una tasca de grup de manera que el llistat de codis d'usuaris responsables queda buit.
      parameters:
        - $ref: '#/components/parameters/TascaIdPathParam'
      responses:
        '204':
          description: Ok. No content

#security: 
#  - openId: 
#    - HEL_SUPER
#    - HEL_ADMIN
#    - HEL_USER
#    - tothom
components:
#  securitySchemes:
#    openId:   
#      type: openIdConnect
#      openIdConnectUrl: https://example.com/.well-known/openid-configuration
  schemas:
    Expedient:
      type: object
      required:
        - id
        - entornId
        - expedientTipusId
        - processInstanceId
        - numero
        - numeroDefault
        - dataInici
        - estatTipus
      properties:
        id:
          description: Id de l'expedient a Helium.
          type: integer
          format: int64
          example: 1234
        entornId:
          description: Id de l'entonr a Helium..
          type: integer
          format: int64
          example: 1234
        expedientTipusId:
          description: Id del tipus d'expedient a Helium.
          type: integer
          format: int64
          example: 1234
        processInstanceId:
          description: Id de la instància de procés que es correspon amb l'expedient.
          type: string
          maxLength: 255
          example: 12345678
        numero:
          description: Número de l'expedient
          type: string
          maxLength: 64
          example: 123/2021
        numeroDefault :
          description: Número per defecte de l'expedient
          type: string
          maxLength: 64
          example: 123/2021
        titol:
          description: Títol de l'expedient
          type: string
          maxLength: 255
          example: Títol expedient
        dataInici:
          description: Data d'inici de l'expedient.
          type: string
          example: '01/12/2021 01:02:03.456'
        dataFi:
          description: Data de finalització de l'expedient.
          type: string
          example: '31/12/2021 01:02:03.456'
        estatTipus:
          description: Indica el tipus d'estat CUSTOM, INICAT o FINALITZAT. En cas de ser tipus CUSTOM llavors s'informa l' id del tipus d'expedient guardat.
          type: string
          enum:
            - INICIAT
            - FINALITZAT
            - CUSTOM          
          example: 'INICIAT'
        estatId:
          description: identificador de l'estat dins de la tipologia. Si no és un estat específic els possibles valors són INICAT o FINALITZAT.
          type: integer
          format: int32
          example: 2
        aturat:
          type: boolean
          description: Indica si l'expedient està aturat.
        infoAturat:
          description: Informació que introdueix l'usuari quan atura un expedient.
          type: string
          maxLength: 1024
          example: 'Motiu expedient aturat'
        anulat:
          type: boolean
          description: Indica si l'expedient està anul·lat.
        comentariAnulat:
          description: Comentari que introdueix l'usuari quan anul·la un expedient.
          type: string
          maxLength: 255
          example: 'Comentari anul·lat'
        alertesTotals:
          description: Número d'alertes totals que té un expedient
          type: integer
          format: int32
        alertesPendents:
          description: Número d'alertes pendents per llegir que té un expedient
          type: integer
          format: int32
        ambErrors:
          type: boolean
          description: Indica si l'expedient té algun error per marcarlo en el llistat o filtrar-lo.
  
    ExpedientList:
      type: array
      items:
        $ref: '#/components/schemas/Expedient'
    ExpedientPagedList:
      description: Llistat paginat d'expedients
      type: object
      properties:
        content:
          $ref: '#/components/schemas/ExpedientList'
      allOf:
      - $ref: '#/components/schemas/PagedResponse'

    Tasca:
      type: object
      required:
        - id
        - expedientId
        - procesId
        - nomres
        - dataCreacio
      properties:
        id:
          description: Id de la instància de tasca.
          type: string
          maxLength: 64
          example: "1234"
        expedientId:
          description: Id de l'expedient de la tasca.
          type: integer
          format: int64
          example: 1234
        procesId:
          description: Id del procés al qual pertany la tasca..
          type: string
          maxLength: 64
          example: "1234"
        nom:
          description: Nom de la tasca en el flux
          type: string
          maxLength: 255
          example: tasca_codi
        titol:
          description: Títol de la tasca
          type: string
          maxLength: 255
          example: Títol de la tasca a l'expedient. Pot coincidir amb el nom.
        agafada:
          description: Indica si la tasca està agafada.
          type: boolean
        cancelada:
          description: Indica si la tasca està cancel·lada.
          type: boolean
        suspesa:
          description: Indica si la tasca està suspesa.
          type: boolean
        completada:
          description: Indica si la tasca està completada.
          type: boolean
        assignada:
          description: Indica si la tasca està assignada.
          type: boolean
        marcadaFinalitzar:
          description: Indica si la tasca està marcada per finalitzar.
          type: boolean
        errorFinalitzacio:
          description: Indica si la tasca conté errors de finalització.
          type: boolean
        dataFins:
          description: Data límit de la tasca.
          type: string
          example: '01/12/2021 01:02:03.456'
        dataFi:
          description: Data de finalització de la tasca.
          type: string
          example: '31/12/2021 01:02:03.456'
        iniciFinalitzacio:
          description: Data d'inici de la finalització de la tasca.
          type: string
          example: '31/12/2021 01:02:03.456'
        dataCreacio:
          description: Data de creació de la tasca.
          type: string
          example: '31/12/2021 01:02:03.456'
        usuariAssignat:
          description: Codi de l'usuari assignat a la tasca.
          type: string
          maxLength: 255
          example: usuari_codi
        grupAssignat:
          description: Codi del grup assignat a la tasca.
          type: string
          maxLength: 255
          example: grup_codi
        prioritat:
          description: Prioritat assigndada a la tasca.
          type: integer
          example: 3
        responsables:
          description: Llista d'usuaris responsables.
          type: array
          items:
            type: string
          example: {'usuari1', 'usuari2'}
  
    TascaList:
      type: array
      items:
        $ref: '#/components/schemas/Tasca'

    TascaPagedList:
      description: Llistat paginat de tasques
      type: object
      properties:
        content:
          $ref: '#/components/schemas/TascaList'
      allOf:
      - $ref: '#/components/schemas/PagedResponse'

    IdsPagedList:
      description: Llistat paginat d'identificadors en les consultes on només es retorna l'identificador Long.
      type: object
      properties:
        content:
          type: array
          items: 
            type: integer
            format: int64
            example: 1234
      allOf:
      - $ref: '#/components/schemas/PagedResponse'

    PagedResponse:
      type: object
      properties:
        pageable:
          $ref: '#/components/schemas/PagedResponse_pageable'
        totalPages:
          type: integer
          format: int32
        last:
          type: boolean
        totalElements:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        number:
          type: integer
          format: int32
        numberOfElements:
          type: integer
          format: int32
        sort:
          $ref: '#/components/schemas/PagedResponse_pageable_sort'
        first:
          type: boolean
          
    PagedResponse_pageable:
      type: object
      properties:
        sort:
          $ref: '#/components/schemas/PagedResponse_pageable_sort'
        offset:
          type: integer
          format: int32
        pageNumber:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
        paged:
          type: boolean
        unpaged:
          type: boolean
    PagedResponse_pageable_sort:
      type: object
      properties:
        sorted:
          type: boolean
        unsorted:
          type: boolean
   
    PatchBody:
      type: array
      items:
        $ref: '#/components/schemas/PatchDocument'
        
    PatchDocument: 
      description: Document amb format JSONPatch (definit al RFC 6902) 
      required:
       - "op"
       - "path"
      properties: 
       op: 
        type: string 
        description: Operació a realitzar 
        enum:
         - "add"
         - "remove"
         - "replace"
         - "move"
         - "copy"
         - "test"
       path: 
        type: string 
        description: Una ruta de l'objecte a modificar 
       value: 
        type: object 
        description: El valor a utilitzar en la operació.
       from: 
        type: string 
        description: UUna ruta de l'objecte a modificar
  parameters:
    ExpedientIdPathParam:
      name: expedientId
      in: path
      description: Identificador del expedient
      required: true
      style: simple
      explode: false
      schema:
        type: integer
        format: int64
        
    TascaIdPathParam:    
      name: tascaId
      in: path
      description: Identificador de la tasca
      required: true
      style: simple
      explode: false
      schema:
        type: integer
        format: int64
    EntornParam:
      name: entornId
      in: query
      description: Identificador de l'entorn
      required: true
      style: form
      explode: true
      schema:
        type: integer
        format: int64
    FiltreParam:
      name: filtre
      in: query
      description: cadena amb format rsql per a definir el filtre a aplicar a la consulta
      required: false
      style: form
      explode: true
      schema:
        type: string
    TipusExpedientParam:
      name: expedientTipusId
      in: query
      description: Identificador del tipus d'expedient al que pertany el expedient
      required: false
      style: form
      explode: true
      schema:
        type: integer
        format: int64
    ExpedientParam:
      name: expedientId
      in: query
      description: Identificador de l'expedient
      required: false
      style: form
      explode: true
      schema:
        type: integer
        format: int64
    PageNumberParam:
      name: page
      in: query
      description: número de pagina a retornar en cas de desitjar paginació
      required: false
      style: form
      explode: true
      schema:
        minimum: 0
        type: integer
        format: int32
        default: 0
    PageSizeParam:
      name: size
      in: query
      description: mida de la pàgina a retornat en cas de desitjar paginació
      required: false
      style: form
      explode: true
      schema:
        minimum: 0
        type: integer
        format: int32
        default: 25
    SortParam:
      name: sort
      in: query
      description: ordre a aplicar a la consulta
      required: false
      style: form
      explode: true
      schema:
        type: string